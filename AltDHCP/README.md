## Настройка DHCP сервера на базе ALT Server
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/53fb1e7a-d9b9-41ae-a03a-14f8e821d52e)  

# Задача:  
Настроить автоматическое распределение IP-адресов на Alt Server.  
•	a. Учтите, что у клиента должен быть зарезервирован адрес.  
# Выполнение:  
В данной работе потребуется:
⋅⋅* Установленная виртуальная машина ALT Linux Workstation
⋅⋅* Установленная виртуальная машина ALT Linux Server (минимальный пакет установки)
Все операции будем проводить от имени супер-пользователя (root)
```
su -
```
# Server:  
Предварительная настройка виртуальной машины заключается в создании дополнительного сетевого интерфеса и назначения на него LAN Segment (в случае работы с VMWare)
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/173cd43c-1f52-4d20-a194-ea3bc67d9c3f)  
Зададим имя нашей машине:
```
hostnamectl set-hostname Server; exec bash
```

Установим пакет **"dhcp-server"**:
```
apt-get update && apt-get install -y dhcp-server
```

Дополнительно установим пакет для работы с текстом **nano**:
```
apt-get install -y nano
```

Укажем сетевой интерфейс, через который будет работать DHCP-сервер:
```
nano /etc/sysconfig/dhcpd 
```
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/e28a246f-c621-43f4-af24-ef7c260e9001)  
где: ens34 - интерфейс «смотрящий» в сторону клиента  

Опишим конфигурационный файл для DHCP работабщего с IPv4:  

файл с закоментированными примерами находится по пути "/etc/dhcp/dhcpd.conf.example"
```
nano /etc/dhcp/dhcpd.conf
```
после удаления лишних строк из файла - конфигурационный файл выглядит следующим образом:
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/7bb52086-8fb8-4117-88c1-7625cf68bb8f)  

где:
**default и max - leases-time **- стандартное и максимальное время аренды (в секундах)  
**authoritative** - только этот сервер можем выдавать IP адреса  
блок **subnet {}** - сеть, маска сети и диапазон выдаваемых IP  
блок **host {}** - чтобы выдать IP-адрес, исходя из MAC-адреса сетевого интерфейса для того, чей МАС-адрес описан в секции "hardware ethernet"  

После чего пожно проверить данный конфигурационный файл через утилиту "**dhcpd**"  
```
dhcpd -t -cf /etc/dhcp/dhcpd.conf
```
в случае ошибки в описании конфигурационного файла - в выводе данной утилиты будет написано что не так  
Запускаем и добавляем в автозагрузку службу dhcpd:
```
systemctl enable --now dhcpd
```
# Проверка:
Проверим статус службы dhcpd:
```
systemctl status dhcpd
```
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/acc5aa16-0c5f-4444-ba47-ede0ed741fc4)  

Настройка DHCP сервера завершена. Переходим к настройке клиента.

# Client:
Аналогично настройки сервера, устанавливаем LAN Segment **идентичный** тому, что был установлен на машине Server.
Все операции будем проводить от имени супер-пользователя (root)
```
su -
```
Зададим имя нашей машине:
```
hostnamectl set-hostname Client; exec bash
```
Дополнительно установим пакет для работы с текстом **nano**:
```
apt-get install -y nano
```

Стоит отметить, что имя интерфейса (в данном примере настройки ens33) может отличаться от вашего. Дабы быть уверенныи проверим его:
```
ip -c a
```
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/fa80550d-fb52-42db-904e-1ffb6baf135c)  
Зелёным цветом выделено имя интерфейса.
Далее, необходимо произвести настройку интерфейса:
```
su -
toor
enter
nano /etc/net/ifaces/ens33/options
```  
Файл должен содержать строки, уканазанные ниже:  
![image](https://github.com/NyashMan/LinuxSysa/assets/1348639/94ecea28-3311-429b-ac0c-66272d3e0b86)

После редактирования файла, необходимо выполнить перезагрузку сетевой службыЖ
```
systemctl restart network
```
Проверим результат, клиент должен получить IP-адрес от сервера DHCP автоматически:

```
ip -c a
```
